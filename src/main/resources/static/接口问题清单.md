# 接口问题清单（User)

## 用户接口

### 注册接口

路径：/api/user/register

方法：POST

请求体：

```json
{
    "username": "祝乙萍",
    "password": "efojT2ci4zPgbm6",
    "email": "ixjlj1.ldk2@gmail.com",
    "phone": "19843953451"
}
```

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": "注册成功"
}
```

---

### 登录接口

路径：/api/user/login

方法：POST

请求体：

```json
{
    "account":"xunzong",
    "password":"123456"
}
```

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": {
        "id": 1,
        "username": "xunzong",
        "token": "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ4dW56b25nIiwicm9sZSI6ImFkbWluIiwidXNlcklkIjoxLCJqdGkiOiI5OWQ1OGRmYS1jMGYwLTRlZTktOTI5NC1kMGRlZmI0NzA5OWQiLCJpYXQiOjE3NTY4MDU2MTksImV4cCI6MTc1NjgwOTIxOX0.NWoSlK51HjunrHY7FaMj2NQE3pikLIJFrUU_SW8IoPM"
    }
}
```

---

### 登出接口

路径：/api/user/logout

方法：POST

请求体：

```json
    "Authorization: string"
```

反正需要Authorization里的token

其他的不需要，我后端会自动拉入黑名单，防止token被利用

token生效的时间是登录后1个小时

---

### 获取当前用户信息

路径：/api/user/{username}

方法：GET

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": {
        "id": 1,
        "username": "xunzong",
        "email": "2124159894@qq.com",
        "phone": "15779138804",
        "avatar": "",
        "status": 1,
        "role": "admin",
        "lastLoginTime": "2025-08-29T19:31:43"
    }
}
```

---

###  添加“我喜欢”功能接口

路径：/api/user/like/{courseId}

方法：POST

响应结果：

```json
{
    "code": 0,
    "msg": "该课程已添加至“我喜欢”",
    "data": null
}
```

---

### 取消“我喜欢”功能接口

路径：/api/user/like/{courseId}

方法：DELETE

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": "已成功取消“我喜欢”"
}
```



### 查询‘我喜欢’列表

路径：/api/user/like

方法：GET

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": [
        {
            "majorId": 2,
            "createTime": "2025-09-03T00:14:48"
        },
        {
            "majorId": 4,
            "createTime": "2025-09-03T00:14:45"
        }
    ]
}
```



## 订单接口

### 添加订单

路径：/api/user/order

方法：POST

请求体：

```java
private Long userId;//下单用户id
private Long majorId;//需求专业id
private Double price;// 价格
private String ordertype;//订单类型
private String title;//订单标题
private String demand;//需求描述
/*{
    "userId": 2,
    "majorId": 4,
    "price": 351.09,
    "title": "苦哇塞哈披最优秀飞行员",
    "demand": "nostrud",
    "type": "deserunt proident"
}*/
```

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": "添加订单成功"
}
```

---

### 查询订单（此用户,分页）

路径：/api/user/order/{id}

方法：GET

请求体：

```java
//http://localhost:8080/api/admin/list?pageNum=1&pageSize=10
```

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": {
        "total": 2,
        "pageNum": 1,
        "pageSize": 10,
        "list": [
            {
                "id": 1961401168936599554,
                "orderNumber": "70-2-1756469454350-127",
                "price": 114.89,
                "title": "雪崩慢太自从哇塞倒清楚像相当呸",
                "demand": "ut Lorem in laborum",
                "status": 0
            },
            {
                "id": 1961392725710376961,
                "orderNumber": "4-2-1756467441340-831",
                "price": 456.35,
                "title": "整甜许多哼代表摔一同",
                "demand": "id cillum",
                "status": 0
            }
        ]
    }
}
```

---

## 专业接口

### 查询所有专业信息

路径：/api/user/major/list

方法：GET

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": [
        {
            "id": 2,
            "majorName": "计算机科学与技术",
            "majorCode": "CS101",
            "majorDesc": "学习编程、算法、系统等",
            "likeCount": 1,
            "majorStatus": 1
        },
        {
            "id": 4,
            "majorName": "软件工程",
            "majorCode": "SE202",
            "majorDesc": "专注于软件开发与项目管理",
            "likeCount": 1,
            "majorStatus": 1
        }
    ]
}
```

返回结果为一个数组列表

---

## 课程接口

### 查询所有课程信息

路径：/api/user/course/list

方法：GET

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": {
        "total": 2,
        "pageNum": 1,
        "pageSize": 10,
        "list": [
            {
                "id": 2,
                "courseName": "java",
                "courseCode": "101",
                "courseDesc": "aute ullamco nulla",
                "courseUrl": "https://lonely-metabolite.com/",
                "likeCount": 0,
                "courseStatus": 1
            },
            {
                "id": 3,
                "courseName": "c",
                "courseCode": "102",
                "courseDesc": "autes a fafafa ullamco nulla",
                "courseUrl": "https://lonely-as dasdsadametabolite.com/",
                "likeCount": 0,
                "courseStatus": 1
            }
        ]
    }
}
```

这里的url是fileuuid哦，别搞错了目前这是测试的

---

## 文件接口

### 文件上传接口

路径：/api/common/file/upload

方法：POST

响应结果：

```java
private Long id;//文件id
private String fileName;//文件名
private String fileUrl;//文件URL
private String fileType;//文件类型
private Long fileSize;//文件大小(字节)
```

---

### 头像文件上传

路径：/api/common/file/upload/avatar

方法：POST

响应结果：

```java
private Long id;//文件id
private String fileName;//文件名
private String fileUrl;//文件URL
private String fileType;//文件类型
private Long fileSize;//文件大小(字节)
```

---

### 文件下载

路径：/api/file/download/{fileUuid}

方法：GET

其中的fileUuid会在文件上传的时候返回，或者我等会写个根据用户查询文件，返回fileuuid？

---

### 头像预览

路径：/api/file/avatar/{fileUuid}

方法：GET

其中的fileUuid会在头像上传的时候返回，好像用户信息里包含avatar，我等会把这个换成fileuuid

---

# 接口问题清单（Admin）

## 用户接口

### 获取用户列表（所有用户信息）

路径：/api/admin/list

方法：GET

请求体：

```java
//http://localhost:8080/api/admin/list?pageNum=1&pageSize=10
```

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": {
        "total": 2,
        "pageNum": 1,
        "pageSize": 10,
        "list": [
            {
                "id": 1,
                "username": "xunzong",
                "email": "2124159894@qq.com",
                "phone": "15779138804",
                "avatar": "",
                "status": 1,
                "role": "admin",
                "lastLoginTime": "2025-08-29T20:49:14"
            },
            {
                "id": 2,
                "username": "xunzong1",
                "email": "2124159895@qq.com",
                "phone": "15779138805",
                "avatar": "",
                "status": 1,
                "role": "user",
                "lastLoginTime": "2025-08-29T10:49:58"
            }
        ]
    }
}
```

使用了分页，默认pageNum=1,pageSize=10

---

### 删除用户（管理员专属）

路径：/api/admin/{id}

方法：DELETE

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": "删除用户成功"
}
```

---

### 修改用户信息（如封号）

路径：/api/admin/

方法：PUT

请求体：

```java
private Long id;//用户id
private String username;//用户名
private String password;//密码
private String email;//邮箱
private String phone;//手机号
private String avatar;//头像
private String role;//角色
private Integer status;//状态
```

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": "修改用户信息成功"
}
```

其中的id是必须要有的，其他的可以是一个或多个

---

## 订单接口

### 查询所有订单

路径：/api/admin/order/list

方法：GET

请求体：

```java
//http://localhost:8080/api/admin/list?pageNum=1&pageSize=10
```

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": {
        "total": 3,
        "pageNum": 1,
        "pageSize": 10,
        "list": [
            {
                "id": 1961401168936599554,
                "orderNumber": "70-2-1756469454350-127",
                "price": 114.89,
                "title": "雪崩慢太自从哇塞倒清楚像相当呸",
                "demand": "ut Lorem in laborum",
                "status": 0
            },
            {
                "id": 1961394592431484930,
                "orderNumber": "70-17-1756467886399-297",
                "price": 114.89,
                "title": "雪崩慢太自从哇塞倒清楚像相当呸",
                "demand": "ut Lorem in laborum",
                "status": 0
            },
            {
                "id": 1961392725710376961,
                "orderNumber": "4-2-1756467441340-831",
                "price": 456.35,
                "title": "整甜许多哼代表摔一同",
                "demand": "id cillum",
                "status": 0
            }
        ]
    }
}
```

---

### 根据用户id查询用户订单

路径：/api/admin/order/{id}

方法：GET

请求体：

```java
//http://localhost:8080/api/admin/list?pageNum=1&pageSize=10
```

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": {
        "total": 2,
        "pageNum": 1,
        "pageSize": 10,
        "list": [
            {
                "id": 1961401168936599554,
                "orderNumber": "70-2-1756469454350-127",
                "price": 114.89,
                "title": "雪崩慢太自从哇塞倒清楚像相当呸",
                "demand": "ut Lorem in laborum",
                "status": 0
            },
            {
                "id": 1961392725710376961,
                "orderNumber": "4-2-1756467441340-831",
                "price": 456.35,
                "title": "整甜许多哼代表摔一同",
                "demand": "id cillum",
                "status": 0
            }
        ]
    }
}
```



---

### 修改订单(单个或多个字段都可以)

路径：/api/admin/order

方法：PUT

请求体：

```json
{
    "id": 1961401168936599554,
    "userId": 2,
    "majorId": 4,
    "price": 286.69,
    "title": "吸捣没好在生动油门但是全哎出生",
    "demand": "laboris nostrud",
    "status": 3
}
```

响应请求：

```json
{
    "code": 1,
    "msg": null,
    "data": "订单修改成功"
}
```

其中的id是必须要有的

---

### 删除订单

路径：/api/admin/order/{id}

方法：DELETE

响应请求：

```json
{
    "code": 1,
    "msg": null,
    "data": "订单删除成功"
}
```



---

### 添加订单

路径：/api/admin/order

方法：POST

请求体：

```
private Long userId;//下单用户id
private Long majorId;//需求专业id
private Double price;// 价格
private String ordertype;//订单类型
private String title;//订单标题
private String demand;//需求描述
{
    "userId": 2,
    "majorId": 4,
    "price": 351.09,
    "title": "苦哇塞哈披最优秀飞行员",
    "demand": "nostrud",
    "type": "deserunt proident"
}
```

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": "添加订单成功"
}
```



---

## 专业接口

### 添加专业

路径：/api/admin/major

方法：POST

请求体：

```java
    private String majorName;//专业名称
    private String majorCode;//专业代码
    private String majorDesc;//专业描述
```

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": "添加专业成功"
}
```

---

### 修改专业状态

路径：/api/admin/major/update/{id}/status/{status}

方法：PUT

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": "修改专业状态成功"
}
```

其中的id是专业id，status是状态0-禁用，1-启用

---

### 删除专业

路径：/api/admin/major/{id}

方法：DELETE

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": "删除专业状态成功"
}
```

其中的id是专业id

---

## 课程接口

### 添加课程

路径：/api/admin/course

方法：POST

请求体：

```
"private String courseName;//课程名称"
"private String courseCode;//课程代码"
"private String courseDesc;//课程描述"
"private String courseUrl;//课程图片链接"
{
    "courseName": "java",
    "courseCode": "101",
    "courseDesc": "aute ullamco nulla",
    "courseUrl": "https://lonely-metabolite.com/"
}
```

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": "添加课程成功"
}
```

其中的courseUrl是用头像上传返回的fileuuid进行填充哦，不要弄成别的了

---

### 修改课程状态

路径：/api/admin/course/update/{id}/status/{status}

方法：PUT

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": "修改课程状态成功"
}
```

其中的id是课程id，status是状态0-禁用，1-启用

---

### 删除课程

路径：/api/admin/course/{id}

方法：DELETE

响应结果：

```json
{
    "code": 1,
    "msg": null,
    "data": "删除课程状态成功"
}
```

其中的id是课程id

---

# 服务器相关

## 后端

- 服务器地址：http://106.52.6.93:8080
- 文件上传路径：/home/graduation/file/uploads
- 头像上传路径：/home/graduation/file/avatar
- 服务器后端路径：/www/graduation/*.jar文件
- 后端历史文件路径：/www/graduation/old
- 后端日志路径：/var/log/graduation-project/
  - 每个日志文件最大100mb
  - 最多保留30天
  - 日志总大小不超过3GB
  - 自动清理过期日志
- Api接口网站：[毕设接单平台API文档标题](http://106.52.6.93:8080/doc.html#/home)



## 数据库相关

### major表

| 名称         | 类型         | 备注     | not null | unique |
| ------------ | ------------ | -------- | -------- | ------ |
| id           | int          | 专业id   | 是       | 是     |
| major_name   | varcher(50)  | 名称     | 是       | 是     |
| major_code   | varcher(10)  | 代码     | 是       | 是     |
| major_desc   | varcher(255) | 需求     | 否       | 否     |
| major_status | int          | 状态     | 是       | 否     |
| create_time  | datetime     | 创建时间 | 否       | 否     |
| update_time  | datetime     | 更新时间 | 否       | 否     |

### orders表

| 名称         | 类型          | 备注     | not null | unique |
| ------------ | ------------- | -------- | -------- | ------ |
| id           | int           | 订单id   | 是       | 是     |
| order_number | varcher(50)   | 订单号   | 是       | 是     |
| user_id      | int           | 用户id   | 是       | 否     |
| major_id     | int           | 专业id   | 是       | 否     |
| price        | decimal(10,2) | 价格     | 是       | 否     |
| title        | varcher(50)   | 标题     | 是       | 否     |
| demand       | varcher(1000) | 需求     | 是       | 否     |
| type         | varcher(50)   | 类型     | 是       | 否     |
| status       | int           | 订单状态 | 是       | 否     |
| create_time  | datetime      | 创建时间 | 否       | 否     |
| update_time  | datetime      | 更新时间 | 否       | 否     |

### upload_file表

| 名称           | 类型         | 备注             | not null | unique |
| -------------- | ------------ | ---------------- | -------- | ------ |
| id             | int          | 文件id           | 是       | 是     |
| username       | varcher(20)  | 用户名           | 是       | 否     |
| file_name      | varcher(255) | 文件名           | 是       | 否     |
| file_uuid      | varcher(255) | 文件uuid         | 是       | 否     |
| file_url       | varcher(500) | 文件url          | 否       | 否     |
| file_path      | varcher(500) | 文件路径         | 是       | 否     |
| file_size      | bigint       | 文件大小         | 否       | 否     |
| file_type      | varcher(255) | 文件类型         | 否       | 否     |
| file_or_avatar | int          | 文件 0还是头像 1 | 是       | 否     |
| create_time    | datetime     | 创建时间         | 否       | 否     |
| update_time    | datetime     | 更新时间         | 否       | 否     |

### user表

| 名称            | 类型         | 备注         | not null | unique |
| --------------- | ------------ | ------------ | -------- | ------ |
| id              | int          | 用户id       | 是       | 是     |
| username        | varcher(20)  | 用户名       | 是       | 是     |
| password        | varcher(200) | 密码         | 是       | 否     |
| email           | varcher(50)  | 邮箱         | 是       | 是     |
| phone           | varcher(20)  | 电话         | 是       | 是     |
| status          | int          | 状态         | 是       | 否     |
| role            | varcher(10)  | 角色         | 是       | 否     |
| last_login_time | datetime     | 最后登录时间 | 否       | 否     |
| create_time     | datetime     | 创建时间     | 否       | 否     |
| update_time     | datetime     | 更新时间     | 否       | 否     |
| avatar          | varcher(500) | 头像         | 是       | 否     |

### user_major表

| 名称        | 类型     | 备注     | not null | unique |
| ----------- | -------- | -------- | -------- | ------ |
| id          | int      | 主键id   | 是       | 是     |
| user_id     | int      | 用户id   | 是       | 否     |
| major_id    | int      | 专业id   | 是       | 否     |
| create_time | datetime | 创建时间 | 否       | 否     |
| update_time | datetime | 更新时间 | 否       | 否     |

